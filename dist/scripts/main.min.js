"use strict";/*!
               *
               *  Web Starter Kit
               *  Copyright 2015 Google Inc. All rights reserved.
               *
               *  Licensed under the Apache License, Version 2.0 (the "License");
               *  you may not use this file except in compliance with the License.
               *  You may obtain a copy of the License at
               *
               *    https://www.apache.org/licenses/LICENSE-2.0
               *
               *  Unless required by applicable law or agreed to in writing, software
               *  distributed under the License is distributed on an "AS IS" BASIS,
               *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
               *  See the License for the specific language governing permissions and
               *  limitations under the License
               *
               */
!function(){var e=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));"serviceWorker"in navigator&&("https:"===window.location.protocol||e)&&navigator.serviceWorker.register("service-worker.js").then(function(e){e.onupdatefound=function(){if(navigator.serviceWorker.controller){var r=e.installing;r.onstatechange=function(){switch(r.state){case"installed":break;case"redundant":throw new Error("The installing service worker became redundant.")}}}}})["catch"](function(e){console.error("Error during service worker registration:",e)}),window.googleMapsOnError=function(){var e="Google Maps did not load correctly",r='<div id="error-panel"class="error mdl-typography--text-center mdl-color--grey-300 mdl-color-text--grey-700"><div class="error__body-center"><h1>Oops, something went wrong</h1><h2>'+e+"</h2></div></div>";document.body.innerHTML=r},window.initMap=function(){window.map=new google.maps.Map(document.getElementById("map"),{center:{lat:38.464525,lng:23.60507},zoom:12,styles:[{featureType:"water",stylers:[{saturation:43},{lightness:-11},{hue:"#0088ff"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{hue:"#ff0000"},{saturation:-100},{lightness:99}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#808080"},{lightness:54}]},{featureType:"landscape.man_made",elementType:"geometry.fill",stylers:[{color:"#ece2d9"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#ccdca1"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#767676"}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{color:"#ffffff"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#b8cb93"}]},{featureType:"poi.park",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.sports_complex",stylers:[{visibility:"off"}]},{featureType:"poi.medical",stylers:[{visibility:"off"}]},{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels.icon",stylers:[{visibility:"off"}]}],mapTypeControl:!1}),ko.applyBindings(new ViewModel)}}();var dataModel={};dataModel.foursquare=function(e){return new Promise(function(r,t){var o="DZLWV3OVTRDIJ4A3HYBWIHZLHNPPWSPULWU0MOIUPV4UGD0B",i="MFMOIF4BD4H0K3ULA41LF2WD5SK0KRJAQLTUZT4VV3XVGC0O",n=e,a="20170425",s="1",l="https://api.foursquare.com/v2/venues/explore?",u=50,c=l+"client_id="+o+"&client_secret="+i+"&ll="+n+"&v="+a+"&venuePhotos="+s+"&limit="+u,f=new XMLHttpRequest;f.open("GET",c),f.responseType="json",f.onload=function(){if(200===f.status){var e=[],i=!0,n=!1,a=void 0;try{for(var s,l=f.response.response.groups[0].items[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u,c=s.value,v={name:c.venue.name,foursquare:"https://foursquare.com/v/"+c.venue.id+"?ref="+o,location:{lat:c.venue.location.lat,lng:c.venue.location.lng},distance:c.venue.location.distance,address:c.venue.location.address,rating:{number:Math.round(c.venue.rating)/2,stars:["images/star_border_yellow_18px.svg","images/star_border_yellow_18px.svg","images/star_border_yellow_18px.svg","images/star_border_yellow_18px.svg","images/star_border_yellow_18px.svg"]},icon:c.venue.categories[0].icon.prefix+"bg_32"+c.venue.categories[0].icon.suffix,category:{name:c.venue.categories[0].name,tag:c.venue.categories[0].shortName},photo:c.venue.featuredPhotos.items[0].prefix+"original"+c.venue.featuredPhotos.items[0].suffix};for(u=0;u<Math.floor(v.rating.number);u++)v.rating.stars[u]="images/star_yellow_18px.svg";v.rating.number%1!==0&&(v.rating.stars[u]="images/star_half_yellow_18px.svg"),v.phone=c.venue.contact.phone?c.venue.contact.phone:null,v.facebook=c.venue.contact.facebook?"https://www.facebook.com/"+c.venue.contact.facebook:null,v.price=c.venue.price?c.venue.price.message:null,v.status=c.venue.hours?c.venue.hours.status||"Closed":null,v.url=c.venue.url?c.venue.url:null,e.push(v)}}catch(p){n=!0,a=p}finally{try{!i&&l["return"]&&l["return"]()}finally{if(n)throw a}}r(e)}else{var m=f.status,y=f.statusText;t(Error("There was a problem:","(",m,")",y))}},f.onerror=function(){t(Error("Network Error"))},f.send()})};var ViewModel=function(){var e=this;this.filter=ko.observable(""),this.isDrawerVisible=ko.observable(!1),this.isMapVisible=ko.observable(!0),this.isFilterboxVisible=ko.observable(!0),this.isListVisible=ko.observable(!0),this.currentVenue=ko.observable(),this.markerClick=function(r){e.toggleListDrawerAndMap(),e.setCurrentVenue(r),r.marker.setAnimation(google.maps.Animation.BOUNCE);var t=700;setTimeout(function(){r.marker.setAnimation(null)},3*t)},this.venueClick=function(r){map.panTo(r.location),map.setZoom(17),r.marker.setAnimation(google.maps.Animation.BOUNCE);var t=700;setTimeout(function(){r.marker.setAnimation(null)},3*t),e.markerClick(r)},this.toggleListDrawerAndMap=function(){e.isDrawerVisible(!e.isDrawerVisible()),e.isListVisible(!e.isListVisible()),e.isMapVisible(!e.isMapVisible())},this.setCurrentVenue=function(r){e.currentVenue(r)},this.venues=ko.observableArray([]),this.markers=[],this.hideMarkers=function(e){var r=!0,t=!1,o=void 0;try{for(var i,n=e[Symbol.iterator]();!(r=(i=n.next()).done);r=!0){var a=i.value;a.setVisible(!1)}}catch(s){t=!0,o=s}finally{try{!r&&n["return"]&&n["return"]()}finally{if(t)throw o}}},this.error=ko.observable(null),this.errorFree=ko.pureComputed(function(){return!Boolean(this.error())},this),this.venuesToShow=ko.pureComputed(function(){var e=this.filter();if(""===e){var r=!0,t=!1,o=void 0;try{for(var i,n=this.markers[Symbol.iterator]();!(r=(i=n.next()).done);r=!0){var a=i.value;a.setVisible(!0)}}catch(s){t=!0,o=s}finally{try{!r&&n["return"]&&n["return"]()}finally{if(t)throw o}}return this.venues()}var l=ko.utils.arrayFilter(this.venues(),function(r){return r.category.tag===e||r.category.name===e||r.name===e});this.hideMarkers(this.markers);var u=!0,c=!1,f=void 0;try{for(var v,p=l[Symbol.iterator]();!(u=(v=p.next()).done);u=!0){var m=v.value;m.marker.setVisible(!0)}}catch(s){c=!0,f=s}finally{try{!u&&p["return"]&&p["return"]()}finally{if(c)throw f}}return l},this),dataModel.foursquare("38.464525,23.60507").then(function(r){e.venues(r);var t=!0,o=!1,i=void 0;try{for(var n,a=function(){var r=n.value,t=new google.maps.Marker({position:r.location,title:r.name,animation:google.maps.Animation.DROP,icon:r.icon});r.marker=t,e.markers.push(t),t.addListener("click",function(){e.markerClick(r)}),t.setMap(map)},s=e.venues()[Symbol.iterator]();!(t=(n=s.next()).done);t=!0)a()}catch(l){o=!0,i=l}finally{try{!t&&s["return"]&&s["return"]()}finally{if(o)throw i}}},function(r){console.error("Failed:",r),e.error(r)})};
//# sourceMappingURL=main.min.js.map
