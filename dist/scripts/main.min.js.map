{"version":3,"sources":["main.min.js","main.js","dataModel.js","viewModel.js"],"names":["isLocalhost","Boolean","window","location","hostname","match","navigator","protocol","serviceWorker","register","then","registration","onupdatefound","controller","installingWorker","installing","onstatechange","state","Error","e","console","error","googleMapsOnError","errorMessage","htmlTemplate","document","body","innerHTML","initMap","map","google","maps","Map","getElementById","center","lat","lng","zoom","styles","featureType","stylers","saturation","lightness","hue","elementType","color","visibility","mapTypeControl","ko","applyBindings","ViewModel","dataModel","foursquare","Promise","resolve","reject","FOURSQUARE_CLIENT_ID","FOURSQUARE_CLIENT_SECRET","LL","V","VENUE_PHOTOS","BASE_URL","LIMIT","url","request","XMLHttpRequest","open","responseType","onload","status","venues","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","response","groups","items","Symbol","iterator","next","done","i","item","value","venue","name","id","distance","address","rating","number","Math","round","stars","icon","categories","prefix","suffix","category","tag","shortName","photo","featuredPhotos","floor","phone","contact","facebook","price","message","hours","push","err","statusText","onerror","send","_this","this","filter","observable","isDrawerVisible","isMapVisible","isFilterboxVisible","isListVisible","currentVenue","markerClick","toggleListDrawerAndMap","setCurrentVenue","marker","setAnimation","Animation","BOUNCE","MARKER_JUMP","setTimeout","venueClick","panTo","setZoom","observableArray","markers","hideMarkers","setVisible","errorFree","pureComputed","venuesToShow","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","filteredVenues","utils","arrayFilter","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","data","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_loop","Marker","position","title","animation","DROP","addListener","setMap","_iterator4"],"mappings":"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","file":"main.min.js","sourcesContent":["'use strict'; /*!\n               *\n               *  Web Starter Kit\n               *  Copyright 2015 Google Inc. All rights reserved.\n               *\n               *  Licensed under the Apache License, Version 2.0 (the \"License\");\n               *  you may not use this file except in compliance with the License.\n               *  You may obtain a copy of the License at\n               *\n               *    https://www.apache.org/licenses/LICENSE-2.0\n               *\n               *  Unless required by applicable law or agreed to in writing, software\n               *  distributed under the License is distributed on an \"AS IS\" BASIS,\n               *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n               *  See the License for the specific language governing permissions and\n               *  limitations under the License\n               *\n               */\n/* eslint-env browser */\n(function () {\n  'use strict';\n\n  // Check to make sure service workers are supported in the current browser,\n  // and that the current page is accessed from a secure origin. Using a\n  // service worker from an insecure origin will trigger JS console errors. See\n  // http://www.chromium.org/Home/chromium-security/prefer-secure-origins-for-powerful-new-features\n  var isLocalhost = Boolean(window.location.hostname === 'localhost' ||\n  // [::1] is the IPv6 localhost address.\n  window.location.hostname === '[::1]' ||\n  // 127.0.0.1/8 is considered localhost for IPv4.\n  window.location.hostname.match(\n  /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));\n\n\n\n  if ('serviceWorker' in navigator && (\n  window.location.protocol === 'https:' || isLocalhost)) {\n    navigator.serviceWorker.register('service-worker.js').\n    then(function (registration) {\n      // updatefound is fired if service-worker.js changes.\n      registration.onupdatefound = function () {\n        // updatefound is also fired the very first time the SW is installed,\n        // and there's no need to prompt for a reload at that point.\n        // So check here to see if the page is already controlled,\n        // i.e. whether there's an existing service worker.\n        if (navigator.serviceWorker.controller) {\n          // The updatefound event implies that registration.installing is set:\n          // https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html#service-worker-container-updatefound-event\n          var installingWorker = registration.installing;\n\n          installingWorker.onstatechange = function () {\n            switch (installingWorker.state) {\n              case 'installed':\n                // At this point, the old content will have been purged and the\n                // fresh content will have been added to the cache.\n                // It's the perfect time to display a \"New content is\n                // available; please refresh.\" message in the page's interface.\n                break;\n\n              case 'redundant':\n                throw new Error('The installing ' +\n                'service worker became redundant.');\n\n              default:\n              // Ignore\n            }\n          };\n        }\n      };\n    }).catch(function (e) {\n      console.error('Error during service worker registration:', e);\n    });\n  }\n  // Google maps on error can't be handled with KO\n  // due to the way scripts are organized (async).\n  // So it needs to be handled here\n  window.googleMapsOnError = function () {\n    var errorMessage = 'Google Maps did not load correctly';\n    var htmlTemplate =\n    '<div id=\"error-panel\"' +\n    'class=\"error mdl-typography--text-center mdl-color--grey-300 mdl-color-text--grey-700\">' + // eslint-disable-line max-len\n    '<div class=\"error__body-center\">' +\n    '<h1>Oops, something went wrong</h1>' +\n    '<h2>' + errorMessage + '</h2>' +\n    '</div>' +\n    '</div>';\n    document.body.innerHTML = htmlTemplate;\n  };\n  // Called by google maps callback\n  window.initMap = function () {\n    // initialize map\n    window.map = new google.maps.Map(document.getElementById('map'), {\n      center: { lat: 38.464525, lng: 23.60507 },\n      zoom: 12,\n      // Style by: Sam Herbert, on: https://snazzymaps.com/style/44/mapbox\n      styles: [\n      {\n        featureType: 'water',\n        stylers: [\n        {\n          saturation: 43 },\n\n        {\n          lightness: -11 },\n\n        {\n          hue: '#0088ff' }] },\n\n\n\n      {\n        featureType: 'road',\n        elementType: 'geometry.fill',\n        stylers: [\n        {\n          hue: '#ff0000' },\n\n        {\n          saturation: -100 },\n\n        {\n          lightness: 99 }] },\n\n\n\n      {\n        featureType: 'road',\n        elementType: 'geometry.stroke',\n        stylers: [\n        {\n          color: '#808080' },\n\n        {\n          lightness: 54 }] },\n\n\n\n      {\n        featureType: 'landscape.man_made',\n        elementType: 'geometry.fill',\n        stylers: [\n        {\n          color: '#ece2d9' }] },\n\n\n\n      {\n        featureType: 'poi.park',\n        elementType: 'geometry.fill',\n        stylers: [\n        {\n          color: '#ccdca1' }] },\n\n\n\n      {\n        featureType: 'road',\n        elementType: 'labels.text.fill',\n        stylers: [\n        {\n          color: '#767676' }] },\n\n\n\n      {\n        featureType: 'road',\n        elementType: 'labels.text.stroke',\n        stylers: [\n        {\n          color: '#ffffff' }] },\n\n\n\n      {\n        featureType: 'poi',\n        stylers: [\n        {\n          visibility: 'off' }] },\n\n\n\n      {\n        featureType: 'landscape.natural',\n        elementType: 'geometry.fill',\n        stylers: [\n        {\n          visibility: 'on' },\n\n        {\n          color: '#b8cb93' }] },\n\n\n\n      {\n        featureType: 'poi.park',\n        elementType: 'labels',\n        stylers: [\n        {\n          visibility: 'off' }] },\n\n\n\n      {\n        featureType: 'poi.sports_complex',\n        stylers: [\n        {\n          visibility: 'off' }] },\n\n\n\n      {\n        featureType: 'poi.medical',\n        stylers: [\n        {\n          visibility: 'off' }] },\n\n\n\n      {\n        featureType: 'poi.business',\n        stylers: [\n        {\n          visibility: 'off' }] },\n\n\n\n      {\n        featureType: 'transit',\n        elementType: 'labels.icon',\n        stylers: [{ visibility: 'off' }] }],\n\n\n      // Allows the user to adjust the map to road, satellite, terrain etc\n      mapTypeControl: false });\n\n    // initialize bindings\n    ko.applyBindings(new ViewModel());\n  };\n})();\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiaXNMb2NhbGhvc3QiLCJCb29sZWFuIiwid2luZG93IiwibG9jYXRpb24iLCJob3N0bmFtZSIsIm1hdGNoIiwibmF2aWdhdG9yIiwicHJvdG9jb2wiLCJzZXJ2aWNlV29ya2VyIiwicmVnaXN0ZXIiLCJ0aGVuIiwicmVnaXN0cmF0aW9uIiwib251cGRhdGVmb3VuZCIsImNvbnRyb2xsZXIiLCJpbnN0YWxsaW5nV29ya2VyIiwiaW5zdGFsbGluZyIsIm9uc3RhdGVjaGFuZ2UiLCJzdGF0ZSIsIkVycm9yIiwiY2F0Y2giLCJlIiwiY29uc29sZSIsImVycm9yIiwiZ29vZ2xlTWFwc09uRXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJodG1sVGVtcGxhdGUiLCJkb2N1bWVudCIsImJvZHkiLCJpbm5lckhUTUwiLCJpbml0TWFwIiwibWFwIiwiZ29vZ2xlIiwibWFwcyIsIk1hcCIsImdldEVsZW1lbnRCeUlkIiwiY2VudGVyIiwibGF0IiwibG5nIiwiem9vbSIsInN0eWxlcyIsImZlYXR1cmVUeXBlIiwic3R5bGVycyIsInNhdHVyYXRpb24iLCJsaWdodG5lc3MiLCJodWUiLCJlbGVtZW50VHlwZSIsImNvbG9yIiwidmlzaWJpbGl0eSIsIm1hcFR5cGVDb250cm9sIiwia28iLCJhcHBseUJpbmRpbmdzIiwiVmlld01vZGVsIl0sIm1hcHBpbmdzIjoiY0FBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBa0JBO0FBQ0EsQ0FBQyxZQUFXO0FBQ1Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFJQSxjQUFjQyxRQUFRQyxPQUFPQyxRQUFQLENBQWdCQyxRQUFoQixLQUE2QixXQUE3QjtBQUN0QjtBQUNBRixTQUFPQyxRQUFQLENBQWdCQyxRQUFoQixLQUE2QixPQUZQO0FBR3RCO0FBQ0FGLFNBQU9DLFFBQVAsQ0FBZ0JDLFFBQWhCLENBQXlCQyxLQUF6QjtBQUNFLDBEQURGLENBSmMsQ0FBbEI7Ozs7QUFTQSxNQUFJLG1CQUFtQkMsU0FBbkI7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QU8sU0FEVCxFQURPLENBSFgsRUFyRU07Ozs7QUE4RU47QUFDRU4scUJBQWEsS0FEZjtBQUVFQyxpQkFBUztBQUNQO0FBQ0VNLHNCQUFZLEtBRGQsRUFETyxDQUZYLEVBOUVNOzs7O0FBc0ZOO0FBQ0VQLHFCQUFhLG1CQURmO0FBRUVLLHFCQUFhLGVBRmY7QUFHRUosaUJBQVM7QUFDUDtBQUNFTSxzQkFBWSxJQURkLEVBRE87O0FBSVA7QUFDRUQsaUJBQU8sU0FEVCxFQUpPLENBSFgsRUF0Rk07Ozs7QUFrR047QUFDRU4scUJBQWEsVUFEZjtBQUVFSyxxQkFBYSxRQUZmO0FBR0VKLGlCQUFTO0FBQ1A7QUFDRU0sc0JBQVksS0FEZCxFQURPLENBSFgsRUFsR007Ozs7QUEyR047QUFDRVAscUJBQWEsb0JBRGY7QUFFRUMsaUJBQVM7QUFDUDtBQUNFTSxzQkFBWSxLQURkLEVBRE8sQ0FGWCxFQTNHTTs7OztBQW1ITjtBQUNFUCxxQkFBYSxhQURmO0FBRUVDLGlCQUFTO0FBQ1A7QUFDRU0sc0JBQVksS0FEZCxFQURPLENBRlgsRUFuSE07Ozs7QUEySE47QUFDRVAscUJBQWEsY0FEZjtBQUVFQyxpQkFBUztBQUNQO0FBQ0VNLHNCQUFZLEtBRGQsRUFETyxDQUZYLEVBM0hNOzs7O0FBbUlOO0FBQ0VQLHFCQUFhLFNBRGY7QUFFRUsscUJBQWEsYUFGZjtBQUdFSixpQkFBUyxDQUFDLEVBQUNNLFlBQVksS0FBYixFQUFELENBSFgsRUFuSU0sQ0FKdUQ7OztBQTZJL0Q7QUFDQUMsc0JBQWdCLEtBOUkrQyxFQUFwRCxDQUFiOztBQWdKQTtBQUNBQyxPQUFHQyxhQUFILENBQWlCLElBQUlDLFNBQUosRUFBakI7QUFDRCxHQXBKRDtBQXFKRCxDQTNORCIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKlxuICogIFdlYiBTdGFydGVyIEtpdFxuICogIENvcHlyaWdodCAyMDE1IEdvb2dsZSBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiAgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgIGh0dHBzOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiAgVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqICBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiAgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2VcbiAqXG4gKi9cbi8qIGVzbGludC1lbnYgYnJvd3NlciAqL1xuKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgLy8gQ2hlY2sgdG8gbWFrZSBzdXJlIHNlcnZpY2Ugd29ya2VycyBhcmUgc3VwcG9ydGVkIGluIHRoZSBjdXJyZW50IGJyb3dzZXIsXG4gIC8vIGFuZCB0aGF0IHRoZSBjdXJyZW50IHBhZ2UgaXMgYWNjZXNzZWQgZnJvbSBhIHNlY3VyZSBvcmlnaW4uIFVzaW5nIGFcbiAgLy8gc2VydmljZSB3b3JrZXIgZnJvbSBhbiBpbnNlY3VyZSBvcmlnaW4gd2lsbCB0cmlnZ2VyIEpTIGNvbnNvbGUgZXJyb3JzLiBTZWVcbiAgLy8gaHR0cDovL3d3dy5jaHJvbWl1bS5vcmcvSG9tZS9jaHJvbWl1bS1zZWN1cml0eS9wcmVmZXItc2VjdXJlLW9yaWdpbnMtZm9yLXBvd2VyZnVsLW5ldy1mZWF0dXJlc1xuICB2YXIgaXNMb2NhbGhvc3QgPSBCb29sZWFuKHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSA9PT0gJ2xvY2FsaG9zdCcgfHxcbiAgICAgIC8vIFs6OjFdIGlzIHRoZSBJUHY2IGxvY2FsaG9zdCBhZGRyZXNzLlxuICAgICAgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lID09PSAnWzo6MV0nIHx8XG4gICAgICAvLyAxMjcuMC4wLjEvOCBpcyBjb25zaWRlcmVkIGxvY2FsaG9zdCBmb3IgSVB2NC5cbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZS5tYXRjaChcbiAgICAgICAgL14xMjcoPzpcXC4oPzoyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT8pKXszfSQvXG4gICAgICApXG4gICAgKTtcblxuICBpZiAoJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvciAmJlxuICAgICAgKHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2h0dHBzOicgfHwgaXNMb2NhbGhvc3QpKSB7XG4gICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoJ3NlcnZpY2Utd29ya2VyLmpzJylcbiAgICAudGhlbihmdW5jdGlvbihyZWdpc3RyYXRpb24pIHtcbiAgICAgIC8vIHVwZGF0ZWZvdW5kIGlzIGZpcmVkIGlmIHNlcnZpY2Utd29ya2VyLmpzIGNoYW5nZXMuXG4gICAgICByZWdpc3RyYXRpb24ub251cGRhdGVmb3VuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyB1cGRhdGVmb3VuZCBpcyBhbHNvIGZpcmVkIHRoZSB2ZXJ5IGZpcnN0IHRpbWUgdGhlIFNXIGlzIGluc3RhbGxlZCxcbiAgICAgICAgLy8gYW5kIHRoZXJlJ3Mgbm8gbmVlZCB0byBwcm9tcHQgZm9yIGEgcmVsb2FkIGF0IHRoYXQgcG9pbnQuXG4gICAgICAgIC8vIFNvIGNoZWNrIGhlcmUgdG8gc2VlIGlmIHRoZSBwYWdlIGlzIGFscmVhZHkgY29udHJvbGxlZCxcbiAgICAgICAgLy8gaS5lLiB3aGV0aGVyIHRoZXJlJ3MgYW4gZXhpc3Rpbmcgc2VydmljZSB3b3JrZXIuXG4gICAgICAgIGlmIChuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5jb250cm9sbGVyKSB7XG4gICAgICAgICAgLy8gVGhlIHVwZGF0ZWZvdW5kIGV2ZW50IGltcGxpZXMgdGhhdCByZWdpc3RyYXRpb24uaW5zdGFsbGluZyBpcyBzZXQ6XG4gICAgICAgICAgLy8gaHR0cHM6Ly9zbGlnaHRseW9mZi5naXRodWIuaW8vU2VydmljZVdvcmtlci9zcGVjL3NlcnZpY2Vfd29ya2VyL2luZGV4Lmh0bWwjc2VydmljZS13b3JrZXItY29udGFpbmVyLXVwZGF0ZWZvdW5kLWV2ZW50XG4gICAgICAgICAgdmFyIGluc3RhbGxpbmdXb3JrZXIgPSByZWdpc3RyYXRpb24uaW5zdGFsbGluZztcblxuICAgICAgICAgIGluc3RhbGxpbmdXb3JrZXIub25zdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc3dpdGNoIChpbnN0YWxsaW5nV29ya2VyLnN0YXRlKSB7XG4gICAgICAgICAgICAgIGNhc2UgJ2luc3RhbGxlZCc6XG4gICAgICAgICAgICAgICAgLy8gQXQgdGhpcyBwb2ludCwgdGhlIG9sZCBjb250ZW50IHdpbGwgaGF2ZSBiZWVuIHB1cmdlZCBhbmQgdGhlXG4gICAgICAgICAgICAgICAgLy8gZnJlc2ggY29udGVudCB3aWxsIGhhdmUgYmVlbiBhZGRlZCB0byB0aGUgY2FjaGUuXG4gICAgICAgICAgICAgICAgLy8gSXQncyB0aGUgcGVyZmVjdCB0aW1lIHRvIGRpc3BsYXkgYSBcIk5ldyBjb250ZW50IGlzXG4gICAgICAgICAgICAgICAgLy8gYXZhaWxhYmxlOyBwbGVhc2UgcmVmcmVzaC5cIiBtZXNzYWdlIGluIHRoZSBwYWdlJ3MgaW50ZXJmYWNlLlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgJ3JlZHVuZGFudCc6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgaW5zdGFsbGluZyAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NlcnZpY2Ugd29ya2VyIGJlY2FtZSByZWR1bmRhbnQuJyk7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAvLyBJZ25vcmVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGR1cmluZyBzZXJ2aWNlIHdvcmtlciByZWdpc3RyYXRpb246JywgZSk7XG4gICAgfSk7XG4gIH1cbiAgLy8gR29vZ2xlIG1hcHMgb24gZXJyb3IgY2FuJ3QgYmUgaGFuZGxlZCB3aXRoIEtPXG4gIC8vIGR1ZSB0byB0aGUgd2F5IHNjcmlwdHMgYXJlIG9yZ2FuaXplZCAoYXN5bmMpLlxuICAvLyBTbyBpdCBuZWVkcyB0byBiZSBoYW5kbGVkIGhlcmVcbiAgd2luZG93Lmdvb2dsZU1hcHNPbkVycm9yID0gKCkgPT4ge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9ICdHb29nbGUgTWFwcyBkaWQgbm90IGxvYWQgY29ycmVjdGx5JztcbiAgICBjb25zdCBodG1sVGVtcGxhdGUgPVxuICAgICAgJzxkaXYgaWQ9XCJlcnJvci1wYW5lbFwiJyArXG4gICAgICAgICdjbGFzcz1cImVycm9yIG1kbC10eXBvZ3JhcGh5LS10ZXh0LWNlbnRlciBtZGwtY29sb3ItLWdyZXktMzAwIG1kbC1jb2xvci10ZXh0LS1ncmV5LTcwMFwiPicgKyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG1heC1sZW5cbiAgICAgICAgJzxkaXYgY2xhc3M9XCJlcnJvcl9fYm9keS1jZW50ZXJcIj4nICtcbiAgICAgICAgICAnPGgxPk9vcHMsIHNvbWV0aGluZyB3ZW50IHdyb25nPC9oMT4nICtcbiAgICAgICAgICAnPGgyPicgKyBlcnJvck1lc3NhZ2UgKyAnPC9oMj4nICtcbiAgICAgICAgJzwvZGl2PicgK1xuICAgICAgJzwvZGl2Pic7XG4gICAgZG9jdW1lbnQuYm9keS5pbm5lckhUTUwgPSBodG1sVGVtcGxhdGU7XG4gIH07XG4gIC8vIENhbGxlZCBieSBnb29nbGUgbWFwcyBjYWxsYmFja1xuICB3aW5kb3cuaW5pdE1hcCA9ICgpID0+IHtcbiAgICAvLyBpbml0aWFsaXplIG1hcFxuICAgIHdpbmRvdy5tYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKSwge1xuICAgICAgY2VudGVyOiB7bGF0OiAzOC40NjQ1MjUsIGxuZzogMjMuNjA1MDd9LFxuICAgICAgem9vbTogMTIsXG4gICAgICAvLyBTdHlsZSBieTogU2FtIEhlcmJlcnQsIG9uOiBodHRwczovL3NuYXp6eW1hcHMuY29tL3N0eWxlLzQ0L21hcGJveFxuICAgICAgc3R5bGVzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBmZWF0dXJlVHlwZTogJ3dhdGVyJyxcbiAgICAgICAgICBzdHlsZXJzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHNhdHVyYXRpb246IDQzXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBsaWdodG5lc3M6IC0xMVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaHVlOiAnIzAwODhmZidcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBmZWF0dXJlVHlwZTogJ3JvYWQnLFxuICAgICAgICAgIGVsZW1lbnRUeXBlOiAnZ2VvbWV0cnkuZmlsbCcsXG4gICAgICAgICAgc3R5bGVyczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBodWU6ICcjZmYwMDAwJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc2F0dXJhdGlvbjogLTEwMFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbGlnaHRuZXNzOiA5OVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGZlYXR1cmVUeXBlOiAncm9hZCcsXG4gICAgICAgICAgZWxlbWVudFR5cGU6ICdnZW9tZXRyeS5zdHJva2UnLFxuICAgICAgICAgIHN0eWxlcnM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY29sb3I6ICcjODA4MDgwJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbGlnaHRuZXNzOiA1NFxuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGZlYXR1cmVUeXBlOiAnbGFuZHNjYXBlLm1hbl9tYWRlJyxcbiAgICAgICAgICBlbGVtZW50VHlwZTogJ2dlb21ldHJ5LmZpbGwnLFxuICAgICAgICAgIHN0eWxlcnM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY29sb3I6ICcjZWNlMmQ5J1xuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGZlYXR1cmVUeXBlOiAncG9pLnBhcmsnLFxuICAgICAgICAgIGVsZW1lbnRUeXBlOiAnZ2VvbWV0cnkuZmlsbCcsXG4gICAgICAgICAgc3R5bGVyczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBjb2xvcjogJyNjY2RjYTEnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgZmVhdHVyZVR5cGU6ICdyb2FkJyxcbiAgICAgICAgICBlbGVtZW50VHlwZTogJ2xhYmVscy50ZXh0LmZpbGwnLFxuICAgICAgICAgIHN0eWxlcnM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY29sb3I6ICcjNzY3Njc2J1xuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGZlYXR1cmVUeXBlOiAncm9hZCcsXG4gICAgICAgICAgZWxlbWVudFR5cGU6ICdsYWJlbHMudGV4dC5zdHJva2UnLFxuICAgICAgICAgIHN0eWxlcnM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY29sb3I6ICcjZmZmZmZmJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGZlYXR1cmVUeXBlOiAncG9pJyxcbiAgICAgICAgICBzdHlsZXJzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHZpc2liaWxpdHk6ICdvZmYnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgZmVhdHVyZVR5cGU6ICdsYW5kc2NhcGUubmF0dXJhbCcsXG4gICAgICAgICAgZWxlbWVudFR5cGU6ICdnZW9tZXRyeS5maWxsJyxcbiAgICAgICAgICBzdHlsZXJzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHZpc2liaWxpdHk6ICdvbidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNvbG9yOiAnI2I4Y2I5MydcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBmZWF0dXJlVHlwZTogJ3BvaS5wYXJrJyxcbiAgICAgICAgICBlbGVtZW50VHlwZTogJ2xhYmVscycsXG4gICAgICAgICAgc3R5bGVyczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB2aXNpYmlsaXR5OiAnb2ZmJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGZlYXR1cmVUeXBlOiAncG9pLnNwb3J0c19jb21wbGV4JyxcbiAgICAgICAgICBzdHlsZXJzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHZpc2liaWxpdHk6ICdvZmYnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgZmVhdHVyZVR5cGU6ICdwb2kubWVkaWNhbCcsXG4gICAgICAgICAgc3R5bGVyczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB2aXNpYmlsaXR5OiAnb2ZmJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGZlYXR1cmVUeXBlOiAncG9pLmJ1c2luZXNzJyxcbiAgICAgICAgICBzdHlsZXJzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHZpc2liaWxpdHk6ICdvZmYnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgZmVhdHVyZVR5cGU6ICd0cmFuc2l0JyxcbiAgICAgICAgICBlbGVtZW50VHlwZTogJ2xhYmVscy5pY29uJyxcbiAgICAgICAgICBzdHlsZXJzOiBbe3Zpc2liaWxpdHk6ICdvZmYnfV1cbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIC8vIEFsbG93cyB0aGUgdXNlciB0byBhZGp1c3QgdGhlIG1hcCB0byByb2FkLCBzYXRlbGxpdGUsIHRlcnJhaW4gZXRjXG4gICAgICBtYXBUeXBlQ29udHJvbDogZmFsc2VcbiAgICB9KTtcbiAgICAvLyBpbml0aWFsaXplIGJpbmRpbmdzXG4gICAga28uYXBwbHlCaW5kaW5ncyhuZXcgVmlld01vZGVsKCkpO1xuICB9O1xufSkoKTtcbiJdfQ==\n\n'use strict';var dataModel = {};\n/**\n                                  * Make a Foursquare API request on a given location.\n                                  * @param {String} location A string in the form of '38.464525,23.60507'.\n                                  * @return {Promise} Return a promise where on resolve it will return an\n                                  * array with all the venues and on reject will return a string with the error\n                                  */\ndataModel.foursquare = function (location) {\n  return new Promise(function (resolve, reject) {\n    var FOURSQUARE_CLIENT_ID =\n    'DZLWV3OVTRDIJ4A3HYBWIHZLHNPPWSPULWU0MOIUPV4UGD0B';\n    var FOURSQUARE_CLIENT_SECRET =\n    'MFMOIF4BD4H0K3ULA41LF2WD5SK0KRJAQLTUZT4VV3XVGC0O';\n    var LL = location;\n    var V = '20170425';\n    var VENUE_PHOTOS = '1';\n    var BASE_URL = 'https://api.foursquare.com/v2/venues/explore?';\n    var LIMIT = 50;\n\n    var url = BASE_URL +\n    'client_id=' + FOURSQUARE_CLIENT_ID +\n    '&client_secret=' + FOURSQUARE_CLIENT_SECRET +\n    '&ll=' + LL +\n    '&v=' + V +\n    '&venuePhotos=' + VENUE_PHOTOS +\n    '&limit=' + LIMIT;\n\n    var request = new XMLHttpRequest();\n    request.open('GET', url);\n    request.responseType = 'json';\n\n    request.onload = function () {\n      if (request.status === 200) {\n        // If successful, resolve the promise by passing back the venues array\n        var venues = [];var _iteratorNormalCompletion = true;var _didIteratorError = false;var _iteratorError = undefined;try {\n          for (var _iterator = request.response.response.groups[0].items[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {var item = _step.value;\n            var venue = {\n              name: item.venue.name,\n              foursquare: 'https://foursquare.com/v/' +\n              item.venue.id +\n              '?ref=' +\n              FOURSQUARE_CLIENT_ID,\n              location: {\n                lat: item.venue.location.lat,\n                lng: item.venue.location.lng },\n\n              distance: item.venue.location.distance,\n              address: item.venue.location.address,\n              rating: {\n                number: Math.round(item.venue.rating) / 2,\n                stars: [\n                'images/star_border_yellow_18px.svg',\n                'images/star_border_yellow_18px.svg',\n                'images/star_border_yellow_18px.svg',\n                'images/star_border_yellow_18px.svg',\n                'images/star_border_yellow_18px.svg'] },\n\n\n              icon: item.venue.categories[0].icon.prefix +\n              'bg_32' +\n              item.venue.categories[0].icon.suffix,\n              category: {\n                name: item.venue.categories[0].name,\n                tag: item.venue.categories[0].shortName },\n\n              photo: item.venue.featuredPhotos.items[0].prefix +\n              'original' +\n              item.venue.featuredPhotos.items[0].suffix };\n\n            // fix rating.stars\n            var i;\n            for (i = 0; i < Math.floor(venue.rating.number); i++) {\n              venue.rating.stars[i] = 'images/star_yellow_18px.svg';\n            }\n            if (venue.rating.number % 1 !== 0) {\n              venue.rating.stars[i] = 'images/star_half_yellow_18px.svg';\n            }\n            // filter through non-standard information\n            venue.phone = item.venue.contact.phone ?\n            item.venue.contact.phone : null;\n            venue.facebook = item.venue.contact.facebook ? 'https://www.facebook.com/' + item.venue.contact.facebook : null;\n            venue.price = item.venue.price ? item.venue.price.message : null;\n            // Even if Foursquare has hours on a venue,\n            // when a venue is closed sometimes the status\n            // message is omitted and only the flag\n            // isOpen: false exists. That's the logic\n            // the following statement represents\n            venue.status = item.venue.hours ?\n            item.venue.hours.status || 'Closed' : null;\n            venue.url = item.venue.url ? item.venue.url : null;\n            venues.push(venue);\n          }} catch (err) {_didIteratorError = true;_iteratorError = err;} finally {try {if (!_iteratorNormalCompletion && _iterator.return) {_iterator.return();}} finally {if (_didIteratorError) {throw _iteratorError;}}}\n        resolve(venues);\n      } else {\n        // If it fails, reject the promise with an error message\n        var status = request.status;\n        var statusText = request.statusText;\n        reject(Error('There was a problem:', '(', status, ')', statusText));\n      }\n    };\n    // Also deal with the case when the entire request fails to begin with\n    // This is probably a network error, so reject the promise with an appropriate message\n    request.onerror = function () {\n      reject(Error('Network Error'));\n    };\n    // Execute request\n    request.send();\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRhdGFNb2RlbC5qcyJdLCJuYW1lcyI6WyJkYXRhTW9kZWwiLCJmb3Vyc3F1YXJlIiwibG9jYXRpb24iLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsIkZPVVJTUVVBUkVfQ0xJRU5UX0lEIiwiRk9VUlNRVUFSRV9DTElFTlRfU0VDUkVUIiwiTEwiLCJWIiwiVkVOVUVfUEhPVE9TIiwiQkFTRV9VUkwiLCJMSU1JVCIsInVybCIsInJlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJyZXNwb25zZVR5cGUiLCJvbmxvYWQiLCJzdGF0dXMiLCJ2ZW51ZXMiLCJyZXNwb25zZSIsImdyb3VwcyIsIml0ZW1zIiwiaXRlbSIsInZlbnVlIiwibmFtZSIsImlkIiwibGF0IiwibG5nIiwiZGlzdGFuY2UiLCJhZGRyZXNzIiwicmF0aW5nIiwibnVtYmVyIiwiTWF0aCIsInJvdW5kIiwic3RhcnMiLCJpY29uIiwiY2F0ZWdvcmllcyIsInByZWZpeCIsInN1ZmZpeCIsImNhdGVnb3J5IiwidGFnIiwic2hvcnROYW1lIiwicGhvdG8iLCJmZWF0dXJlZFBob3RvcyIsImkiLCJmbG9vciIsInBob25lIiwiY29udGFjdCIsImZhY2Vib29rIiwicHJpY2UiLCJtZXNzYWdlIiwiaG91cnMiLCJwdXNoIiwic3RhdHVzVGV4dCIsIkVycm9yIiwib25lcnJvciIsInNlbmQiXSwibWFwcGluZ3MiOiJhQUFBLElBQUlBLFlBQVksRUFBaEI7QUFDQTs7Ozs7O0FBTUFBLFVBQVVDLFVBQVYsR0FBdUIsVUFBU0MsUUFBVCxFQUFtQjtBQUN4QyxTQUFPLElBQUlDLE9BQUosQ0FBWSxVQUFTQyxPQUFULEVBQWtCQyxNQUFsQixFQUEwQjtBQUMzQyxRQUFNQztBQUNKLHNEQURGO0FBRUEsUUFBTUM7QUFDSixzREFERjtBQUVBLFFBQU1DLEtBQUtOLFFBQVg7QUFDQSxRQUFNTyxJQUFJLFVBQVY7QUFDQSxRQUFNQyxlQUFlLEdBQXJCO0FBQ0EsUUFBTUMsV0FBVywrQ0FBakI7QUFD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ZmlsZSI6ImRhdGFNb2RlbC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBkYXRhTW9kZWwgPSB7fTtcbi8qKlxuICogTWFrZSBhIEZvdXJzcXVhcmUgQVBJIHJlcXVlc3Qgb24gYSBnaXZlbiBsb2NhdGlvbi5cbiAqIEBwYXJhbSB7U3RyaW5nfSBsb2NhdGlvbiBBIHN0cmluZyBpbiB0aGUgZm9ybSBvZiAnMzguNDY0NTI1LDIzLjYwNTA3Jy5cbiAqIEByZXR1cm4ge1Byb21pc2V9IFJldHVybiBhIHByb21pc2Ugd2hlcmUgb24gcmVzb2x2ZSBpdCB3aWxsIHJldHVybiBhblxuICogYXJyYXkgd2l0aCBhbGwgdGhlIHZlbnVlcyBhbmQgb24gcmVqZWN0IHdpbGwgcmV0dXJuIGEgc3RyaW5nIHdpdGggdGhlIGVycm9yXG4gKi9cbmRhdGFNb2RlbC5mb3Vyc3F1YXJlID0gZnVuY3Rpb24obG9jYXRpb24pIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIGNvbnN0IEZPVVJTUVVBUkVfQ0xJRU5UX0lEID1cbiAgICAgICdEWkxXVjNPVlRSRElKNEEzSFlCV0lIWkxITlBQV1NQVUxXVTBNT0lVUFY0VUdEMEInO1xuICAgIGNvbnN0IEZPVVJTUVVBUkVfQ0xJRU5UX1NFQ1JFVCA9XG4gICAgICAnTUZNT0lGNEJENEgwSzNVTEE0MUxGMldENVNLMEtSSkFRTFRVWlQ0VlYzWFZHQzBPJztcbiAgICBjb25zdCBMTCA9IGxvY2F0aW9uO1xuICAgIGNvbnN0IFYgPSAnMjAxNzA0MjUnO1xuICAgIGNvbnN0IFZFTlVFX1BIT1RPUyA9ICcxJztcbiAgICBjb25zdCBCQVNFX1VSTCA9ICdodHRwczovL2FwaS5mb3Vyc3F1YXJlLmNvbS92Mi92ZW51ZXMvZXhwbG9yZT8nO1xuICAgIGNvbnN0IExJTUlUID0gNTA7XG5cbiAgICB2YXIgdXJsID0gQkFTRV9VUkwgK1xuICAgICAgJ2NsaWVudF9pZD0nICsgRk9VUlNRVUFSRV9DTElFTlRfSUQgK1xuICAgICAgJyZjbGllbnRfc2VjcmV0PScgKyBGT1VSU1FVQVJFX0NMSUVOVF9TRUNSRVQgK1xuICAgICAgJyZsbD0nICsgTEwgK1xuICAgICAgJyZ2PScgKyBWICtcbiAgICAgICcmdmVudWVQaG90b3M9JyArIFZFTlVFX1BIT1RPUyArXG4gICAgICAnJmxpbWl0PScgKyBMSU1JVDtcblxuICAgIHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgcmVxdWVzdC5vcGVuKCdHRVQnLCB1cmwpO1xuICAgIHJlcXVlc3QucmVzcG9uc2VUeXBlID0gJ2pzb24nO1xuXG4gICAgcmVxdWVzdC5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgIC8vIElmIHN1Y2Nlc3NmdWwsIHJlc29sdmUgdGhlIHByb21pc2UgYnkgcGFzc2luZyBiYWNrIHRoZSB2ZW51ZXMgYXJyYXlcbiAgICAgICAgdmFyIHZlbnVlcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHJlcXVlc3QucmVzcG9uc2UucmVzcG9uc2UuZ3JvdXBzWzBdLml0ZW1zKSB7XG4gICAgICAgICAgbGV0IHZlbnVlID0ge1xuICAgICAgICAgICAgbmFtZTogaXRlbS52ZW51ZS5uYW1lLFxuICAgICAgICAgICAgZm91cnNxdWFyZTogJ2h0dHBzOi8vZm91cnNxdWFyZS5jb20vdi8nICtcbiAgICAgICAgICAgICAgaXRlbS52ZW51ZS5pZCArXG4gICAgICAgICAgICAgICc/cmVmPScgK1xuICAgICAgICAgICAgICBGT1VSU1FVQVJFX0NMSUVOVF9JRCxcbiAgICAgICAgICAgIGxvY2F0aW9uOiB7XG4gICAgICAgICAgICAgIGxhdDogaXRlbS52ZW51ZS5sb2NhdGlvbi5sYXQsXG4gICAgICAgICAgICAgIGxuZzogaXRlbS52ZW51ZS5sb2NhdGlvbi5sbmdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkaXN0YW5jZTogaXRlbS52ZW51ZS5sb2NhdGlvbi5kaXN0YW5jZSxcbiAgICAgICAgICAgIGFkZHJlc3M6IGl0ZW0udmVudWUubG9jYXRpb24uYWRkcmVzcyxcbiAgICAgICAgICAgIHJhdGluZzoge1xuICAgICAgICAgICAgICBudW1iZXI6IE1hdGgucm91bmQoaXRlbS52ZW51ZS5yYXRpbmcpIC8gMixcbiAgICAgICAgICAgICAgc3RhcnM6IFtcbiAgICAgICAgICAgICAgICAnaW1hZ2VzL3N0YXJfYm9yZGVyX3llbGxvd18xOHB4LnN2ZycsXG4gICAgICAgICAgICAgICAgJ2ltYWdlcy9zdGFyX2JvcmRlcl95ZWxsb3dfMThweC5zdmcnLFxuICAgICAgICAgICAgICAgICdpbWFnZXMvc3Rhcl9ib3JkZXJfeWVsbG93XzE4cHguc3ZnJyxcbiAgICAgICAgICAgICAgICAnaW1hZ2VzL3N0YXJfYm9yZGVyX3llbGxvd18xOHB4LnN2ZycsXG4gICAgICAgICAgICAgICAgJ2ltYWdlcy9zdGFyX2JvcmRlcl95ZWxsb3dfMThweC5zdmcnXG4gICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpY29uOiBpdGVtLnZlbnVlLmNhdGVnb3JpZXNbMF0uaWNvbi5wcmVmaXggK1xuICAgICAgICAgICAgICAnYmdfMzInICtcbiAgICAgICAgICAgICAgaXRlbS52ZW51ZS5jYXRlZ29yaWVzWzBdLmljb24uc3VmZml4LFxuICAgICAgICAgICAgY2F0ZWdvcnk6IHtcbiAgICAgICAgICAgICAgbmFtZTogaXRlbS52ZW51ZS5jYXRlZ29yaWVzWzBdLm5hbWUsXG4gICAgICAgICAgICAgIHRhZzogaXRlbS52ZW51ZS5jYXRlZ29yaWVzWzBdLnNob3J0TmFtZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBob3RvOiBpdGVtLnZlbnVlLmZlYXR1cmVkUGhvdG9zLml0ZW1zWzBdLnByZWZpeCArXG4gICAgICAgICAgICAgICdvcmlnaW5hbCcgK1xuICAgICAgICAgICAgICBpdGVtLnZlbnVlLmZlYXR1cmVkUGhvdG9zLml0ZW1zWzBdLnN1ZmZpeFxuICAgICAgICAgIH07XG4gICAgICAgICAgLy8gZml4IHJhdGluZy5zdGFyc1xuICAgICAgICAgIHZhciBpO1xuICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBNYXRoLmZsb29yKHZlbnVlLnJhdGluZy5udW1iZXIpOyBpKyspIHtcbiAgICAgICAgICAgIHZlbnVlLnJhdGluZy5zdGFyc1tpXSA9ICdpbWFnZXMvc3Rhcl95ZWxsb3dfMThweC5zdmcnO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodmVudWUucmF0aW5nLm51bWJlciAlIDEgIT09IDApIHtcbiAgICAgICAgICAgIHZlbnVlLnJhdGluZy5zdGFyc1tpXSA9ICdpbWFnZXMvc3Rhcl9oYWxmX3llbGxvd18xOHB4LnN2Zyc7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGZpbHRlciB0aHJvdWdoIG5vbi1zdGFuZGFyZCBpbmZvcm1hdGlvblxuICAgICAgICAgIHZlbnVlLnBob25lID0gaXRlbS52ZW51ZS5jb250YWN0LnBob25lID9cbiAgICAgICAgICAgIGl0ZW0udmVudWUuY29udGFjdC5waG9uZSA6IG51bGw7XG4gICAgICAgICAgdmVudWUuZmFjZWJvb2sgPSBpdGVtLnZlbnVlLmNvbnRhY3QuZmFjZWJvb2sgPyAnaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tLycgKyBpdGVtLnZlbnVlLmNvbnRhY3QuZmFjZWJvb2sgOiBudWxsO1xuICAgICAgICAgIHZlbnVlLnByaWNlID0gaXRlbS52ZW51ZS5wcmljZSA/IGl0ZW0udmVudWUucHJpY2UubWVzc2FnZSA6IG51bGw7XG4gICAgICAgICAgLy8gRXZlbiBpZiBGb3Vyc3F1YXJlIGhhcyBob3VycyBvbiBhIHZlbnVlLFxuICAgICAgICAgIC8vIHdoZW4gYSB2ZW51ZSBpcyBjbG9zZWQgc29tZXRpbWVzIHRoZSBzdGF0dXNcbiAgICAgICAgICAvLyBtZXNzYWdlIGlzIG9taXR0ZWQgYW5kIG9ubHkgdGhlIGZsYWdcbiAgICAgICAgICAvLyBpc09wZW46IGZhbHNlIGV4aXN0cy4gVGhhdCdzIHRoZSBsb2dpY1xuICAgICAgICAgIC8vIHRoZSBmb2xsb3dpbmcgc3RhdGVtZW50IHJlcHJlc2VudHNcbiAgICAgICAgICB2ZW51ZS5zdGF0dXMgPSBpdGVtLnZlbnVlLmhvdXJzID9cbiAgICAgICAgICAgIGl0ZW0udmVudWUuaG91cnMuc3RhdHVzIHx8ICdDbG9zZWQnIDogbnVsbDtcbiAgICAgICAgICB2ZW51ZS51cmwgPSBpdGVtLnZlbnVlLnVybCA/IGl0ZW0udmVudWUudXJsIDogbnVsbDtcbiAgICAgICAgICB2ZW51ZXMucHVzaCh2ZW51ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmVzb2x2ZSh2ZW51ZXMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSWYgaXQgZmFpbHMsIHJlamVjdCB0aGUgcHJvbWlzZSB3aXRoIGFuIGVycm9yIG1lc3NhZ2VcbiAgICAgICAgbGV0IHN0YXR1cyA9IHJlcXVlc3Quc3RhdHVzO1xuICAgICAgICBsZXQgc3RhdHVzVGV4dCA9IHJlcXVlc3Quc3RhdHVzVGV4dDtcbiAgICAgICAgcmVqZWN0KEVycm9yKCdUaGVyZSB3YXMgYSBwcm9ibGVtOicsICcoJywgc3RhdHVzLCAnKScsIHN0YXR1c1RleHQpKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIC8vIEFsc28gZGVhbCB3aXRoIHRoZSBjYXNlIHdoZW4gdGhlIGVudGlyZSByZXF1ZXN0IGZhaWxzIHRvIGJlZ2luIHdpdGhcbiAgICAvLyBUaGlzIGlzIHByb2JhYmx5IGEgbmV0d29yayBlcnJvciwgc28gcmVqZWN0IHRoZSBwcm9taXNlIHdpdGggYW4gYXBwcm9wcmlhdGUgbWVzc2FnZVxuICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmVqZWN0KEVycm9yKCdOZXR3b3JrIEVycm9yJykpO1xuICAgIH07XG4gICAgLy8gRXhlY3V0ZSByZXF1ZXN0XG4gICAgcmVxdWVzdC5zZW5kKCk7XG4gIH0pO1xufTtcbiJdfQ==\n\n'use strict';var ViewModel = function ViewModel() {// eslint-disable-line no-unused-vars\n  'use strict';\n  /**\n                 * Holds the value of filterbox\n                 * @type {KnockoutObservable<T>}\n                 */var _this = this;\n  this.filter = ko.observable('');\n  /**\n                                    * Status of the drawer UI component\n                                    * @type {KnockoutObservable<T>}\n                                    */\n  this.isDrawerVisible = ko.observable(false);\n  /**\n                                                * Status of the map UI component\n                                                * @type {KnockoutObservable<T>}\n                                                */\n  this.isMapVisible = ko.observable(true);\n  /**\n                                            * Status of the filterbox UI component\n                                            * @type {KnockoutObservable<T>}\n                                            */\n  this.isFilterboxVisible = ko.observable(true);\n  /**\n                                                  * Status of the list UI component\n                                                  * @type {KnockoutObservable<T>}\n                                                  */\n  this.isListVisible = ko.observable(true);\n  /**\n                                             * Current venue\n                                             * @type {KnockoutObservable<T>}\n                                             */\n  this.currentVenue = ko.observable();\n  /**\n                                        * Is triggered when a venue in the list is clicked\n                                        * @param {Object} venue The clicked venue\n                                        */\n  this.markerClick = function (venue) {\n    _this.toggleListDrawerAndMap();\n    _this.setCurrentVenue(venue);\n    // This functionality does not match my own UI\n    // but it was asked by my reviewer to do this regardless\n    // if it was shown or not cause of the rubric requirements\n    venue.marker.setAnimation(google.maps.Animation.BOUNCE);\n    // Each bounce is about 700ms as of google maps version js?v=3.13\n    var MARKER_JUMP = 700;\n    setTimeout(function () {\n      venue.marker.setAnimation(null);\n    }, 3 * MARKER_JUMP);\n  };\n  this.venueClick = function (venue) {\n    map.panTo(venue.location);\n    map.setZoom(17);\n    venue.marker.setAnimation(google.maps.Animation.BOUNCE);\n    // Each bounce is about 700ms as of google maps version js?v=3.13\n    var MARKER_JUMP = 700;\n    setTimeout(function () {\n      venue.marker.setAnimation(null);\n    }, 3 * MARKER_JUMP);\n    // This functionality does not match my own UI\n    // but it was asked by my reviewer to do this regardless\n    // if it was shown or not cause of the rubric requirements\n    _this.markerClick(venue);\n  };\n  /**\n      * Toggle venues list, venue details drawer and map\n      * to visble/non-visible.\n      * Venue details should be the only thing that is shown\n      */\n  this.toggleListDrawerAndMap = function () {\n    _this.isDrawerVisible(!_this.isDrawerVisible());\n    _this.isListVisible(!_this.isListVisible());\n    _this.isMapVisible(!_this.isMapVisible());\n  };\n  /**\n      * Set currentVenue to venue\n      * @param {Object} venue Venue object\n      * @see http://knockoutjs.com/documentation/click-binding.html\n      */\n  this.setCurrentVenue = function (venue) {\n    'use strict';\n    _this.currentVenue(venue);\n  };\n  /**\n      * Initialize the array\n      * @type {KnockoutObservableArray<T>}\n      */\n  this.venues = ko.observableArray([]);\n  /**\n                                         * Contains all venue markers\n                                         * @type {Array} Markers\n                                         */\n  this.markers = [];\n  /**\n                      * Hide markers on a given markers array\n                      * @param {Array} markers Google Maps Markers Array\n                      */\n  this.hideMarkers = function (markers) {var _iteratorNormalCompletion = true;var _didIteratorError = false;var _iteratorError = undefined;try {\n      for (var _iterator = markers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {var marker = _step.value;\n        marker.setVisible(false);\n      }} catch (err) {_didIteratorError = true;_iteratorError = err;} finally {try {if (!_iteratorNormalCompletion && _iterator.return) {_iterator.return();}} finally {if (_didIteratorError) {throw _iteratorError;}}}\n  };\n  /**\n      * Error binding for displaying an error screen\n      * To display an error simply set an error message\n      * @type {KnockoutObservable<String>} String that contains the error message\n      */\n  this.error = ko.observable(null);\n  /**\n                                     * Boolean value. True on error free, false on otherwise.\n                                     * Depends on whether this.error is set.\n                                     * @type {KnockoutComputed<Boolean>} Self explained boolean\n                                     */\n  this.errorFree = ko.pureComputed(function () {\n    return !Boolean(this.error());\n  }, this);\n  /**\n             * Filtering function\n             * @type {KnockoutComputed<T>}\n             */\n  this.venuesToShow = ko.pureComputed(function () {\n    var filter = this.filter();\n    if (filter === '') {var _iteratorNormalCompletion2 = true;var _didIteratorError2 = false;var _iteratorError2 = undefined;try {\n        for (var _iterator2 = this.markers[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {var marker = _step2.value;\n          marker.setVisible(true);\n        }} catch (err) {_didIteratorError2 = true;_iteratorError2 = err;} finally {try {if (!_iteratorNormalCompletion2 && _iterator2.return) {_iterator2.return();}} finally {if (_didIteratorError2) {throw _iteratorError2;}}}\n      return this.venues();\n    }\n    /**\n       * Filter through array and return only matching results\n       * @see http://knockoutjs.com/examples/animatedTransitions.html\n       */\n    var filteredVenues = ko.utils.arrayFilter(this.venues(), function (venue) {\n      return venue.category.tag === filter ||\n      venue.category.name === filter ||\n      venue.name === filter;\n    });\n    // hide all markers\n    this.hideMarkers(this.markers);\n    // and show those from the search results\n    var _iteratorNormalCompletion3 = true;var _didIteratorError3 = false;var _iteratorError3 = undefined;try {for (var _iterator3 = filteredVenues[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {var venue = _step3.value;\n        venue.marker.setVisible(true);\n      }\n      // finally return the filtered venue results\n    } catch (err) {_didIteratorError3 = true;_iteratorError3 = err;} finally {try {if (!_iteratorNormalCompletion3 && _iterator3.return) {_iterator3.return();}} finally {if (_didIteratorError3) {throw _iteratorError3;}}}return filteredVenues;\n  }, this);\n  // Populate arrays and initialize listeners\n  // attach markers to venues\n  // when response is ready\n  dataModel.foursquare('38.464525,23.60507').then(function (data) {\n    // Populate observable array\n    _this.venues(data);\n    // For every venue\n    var _iteratorNormalCompletion4 = true;var _didIteratorError4 = false;var _iteratorError4 = undefined;try {var _loop = function _loop() {var venue = _step4.value;\n        // Create new marker\n        var marker = new google.maps.Marker({\n          position: venue.location,\n          title: venue.name,\n          animation: google.maps.Animation.DROP,\n          icon: venue.icon });\n\n        // attach marker to its venue\n        venue.marker = marker;\n        // save the marker to markers array\n        _this.markers.push(marker);\n        // Add listener to open correct venue details\n        // when the marker is clicked\n        marker.addListener('click', function () {\n          _this.markerClick(venue);\n        });\n        // and finally set the marker\n        marker.setMap(map);};for (var _iterator4 = _this.venues()[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {_loop();\n      }} catch (err) {_didIteratorError4 = true;_iteratorError4 = err;} finally {try {if (!_iteratorNormalCompletion4 && _iterator4.return) {_iterator4.return();}} finally {if (_didIteratorError4) {throw _iteratorError4;}}}\n  }, function (error) {\n    console.error('Failed:', error);\n    _this.error(error);\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZpZXdNb2RlbC5qcyJdLCJuYW1lcyI6WyJWaWV3TW9kZWwiLCJmaWx0ZXIiLCJrbyIsIm9ic2VydmFibGUiLCJpc0RyYXdlclZpc2libGUiLCJpc01hcFZpc2libGUiLCJpc0ZpbHRlcmJveFZpc2libGUiLCJpc0xpc3RWaXNpYmxlIiwiY3VycmVudFZlbnVlIiwibWFya2VyQ2xpY2siLCJ0b2dnbGVMaXN0RHJhd2VyQW5kTWFwIiwic2V0Q3VycmVudFZlbnVlIiwidmVudWUiLCJtYXJrZXIiLCJzZXRBbmltYXRpb24iLCJnb29nbGUiLCJtYXBzIiwiQW5pbWF0aW9uIiwiQk9VTkNFIiwiTUFSS0VSX0pVTVAiLCJzZXRUaW1lb3V0IiwidmVudWVDbGljayIsIm1hcCIsInBhblRvIiwibG9jYXRpb24iLCJzZXRab29tIiwidmVudWVzIiwib2JzZXJ2YWJsZUFycmF5IiwibWFya2VycyIsImhpZGVNYXJrZXJzIiwic2V0VmlzaWJsZSIsImVycm9yIiwiZXJyb3JGcmVlIiwicHVyZUNvbXB1dGVkIiwiQm9vbGVhbiIsInZlbnVlc1RvU2hvdyIsImZpbHRlcmVkVmVudWVzIiwidXRpbHMiLCJhcnJheUZpbHRlciIsImNhdGVnb3J5IiwidGFnIiwibmFtZSIsImRhdGFNb2RlbCIsImZvdXJzcXVhcmUiLCJ0aGVuIiwiZGF0YSIsIk1hcmtlciIsInBvc2l0aW9uIiwidGl0bGUiLCJhbmltYXRpb24iLCJEUk9QIiwiaWNvbiIsInB1c2giLCJhZGRMaXN0ZW5lciIsInNldE1hcCIsImNvbnNvbGUiXSwibWFwcGluZ3MiOiJhQUFBLElBQUlBLFlBQVksU0FBWkEsU0FBWSxHQUFXLENBQUU7QUFDM0I7QUFDQTs7O21CQUZ5QjtBQU16QixPQUFLQyxNQUFMLEdBQWNDLEdBQUdDLFVBQUgsQ0FBYyxFQUFkLENBQWQ7QUFDQTs7OztBQUlBLE9BQUtDLGVBQUwsR0FBdUJGLEdBQUdDLFVBQUgsQ0FBYyxLQUFkLENBQXZCO0FBQ0E7Ozs7QUFJQSxPQUFLRSxZQUFMLEdBQW9C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LEVBdEJvRCxFQUl0RCxzQkFBa0IsTUFBS0ksTUFBTCxFQUFsQixtSUFBaUM7QUFtQmhDLE9BdkJxRDtBQXdCdkQsR0F4QkQsRUF3QkcsaUJBQVM7QUFDVjZCLFlBQVF4QixLQUFSLENBQWMsU0FBZCxFQUF5QkEsS0FBekI7QUFDQSxVQUFLQSxLQUFMLENBQVdBLEtBQVg7QUFDRCxHQTNCRDtBQTRCRCxDQWhMRCIsImZpbGUiOiJ2aWV3TW9kZWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgVmlld01vZGVsID0gZnVuY3Rpb24oKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgJ3VzZSBzdHJpY3QnO1xuICAvKipcbiAgICogSG9sZHMgdGhlIHZhbHVlIG9mIGZpbHRlcmJveFxuICAgKiBAdHlwZSB7S25vY2tvdXRPYnNlcnZhYmxlPFQ+fVxuICAgKi9cbiAgdGhpcy5maWx0ZXIgPSBrby5vYnNlcnZhYmxlKCcnKTtcbiAgLyoqXG4gICAqIFN0YXR1cyBvZiB0aGUgZHJhd2VyIFVJIGNvbXBvbmVudFxuICAgKiBAdHlwZSB7S25vY2tvdXRPYnNlcnZhYmxlPFQ+fVxuICAgKi9cbiAgdGhpcy5pc0RyYXdlclZpc2libGUgPSBrby5vYnNlcnZhYmxlKGZhbHNlKTtcbiAgLyoqXG4gICAqIFN0YXR1cyBvZiB0aGUgbWFwIFVJIGNvbXBvbmVudFxuICAgKiBAdHlwZSB7S25vY2tvdXRPYnNlcnZhYmxlPFQ+fVxuICAgKi9cbiAgdGhpcy5pc01hcFZpc2libGUgPSBrby5vYnNlcnZhYmxlKHRydWUpO1xuICAvKipcbiAgICogU3RhdHVzIG9mIHRoZSBmaWx0ZXJib3ggVUkgY29tcG9uZW50XG4gICAqIEB0eXBlIHtLbm9ja291dE9ic2VydmFibGU8VD59XG4gICAqL1xuICB0aGlzLmlzRmlsdGVyYm94VmlzaWJsZSA9IGtvLm9ic2VydmFibGUodHJ1ZSk7XG4gIC8qKlxuICAgKiBTdGF0dXMgb2YgdGhlIGxpc3QgVUkgY29tcG9uZW50XG4gICAqIEB0eXBlIHtLbm9ja291dE9ic2VydmFibGU8VD59XG4gICAqL1xuICB0aGlzLmlzTGlzdFZpc2libGUgPSBrby5vYnNlcnZhYmxlKHRydWUpO1xuICAvKipcbiAgICogQ3VycmVudCB2ZW51ZVxuICAgKiBAdHlwZSB7S25vY2tvdXRPYnNlcnZhYmxlPFQ+fVxuICAgKi9cbiAgdGhpcy5jdXJyZW50VmVudWUgPSBrby5vYnNlcnZhYmxlKCk7XG4gIC8qKlxuICAgKiBJcyB0cmlnZ2VyZWQgd2hlbiBhIHZlbnVlIGluIHRoZSBsaXN0IGlzIGNsaWNrZWRcbiAgICogQHBhcmFtIHtPYmplY3R9IHZlbnVlIFRoZSBjbGlja2VkIHZlbnVlXG4gICAqL1xuICB0aGlzLm1hcmtlckNsaWNrID0gdmVudWUgPT4ge1xuICAgIHRoaXMudG9nZ2xlTGlzdERyYXdlckFuZE1hcCgpO1xuICAgIHRoaXMuc2V0Q3VycmVudFZlbnVlKHZlbnVlKTtcbiAgICAvLyBUaGlzIGZ1bmN0aW9uYWxpdHkgZG9lcyBub3QgbWF0Y2ggbXkgb3duIFVJXG4gICAgLy8gYnV0IGl0IHdhcyBhc2tlZCBieSBteSByZXZpZXdlciB0byBkbyB0aGlzIHJlZ2FyZGxlc3NcbiAgICAvLyBpZiBpdCB3YXMgc2hvd24gb3Igbm90IGNhdXNlIG9mIHRoZSBydWJyaWMgcmVxdWlyZW1lbnRzXG4gICAgdmVudWUubWFya2VyLnNldEFuaW1hdGlvbihnb29nbGUubWFwcy5BbmltYXRpb24uQk9VTkNFKTtcbiAgICAvLyBFYWNoIGJvdW5jZSBpcyBhYm91dCA3MDBtcyBhcyBvZiBnb29nbGUgbWFwcyB2ZXJzaW9uIGpzP3Y9My4xM1xuICAgIGNvbnN0IE1BUktFUl9KVU1QID0gNzAwO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICB2ZW51ZS5tYXJrZXIuc2V0QW5pbWF0aW9uKG51bGwpO1xuICAgIH0sIDMgKiBNQVJLRVJfSlVNUCk7XG4gIH07XG4gIHRoaXMudmVudWVDbGljayA9IHZlbnVlID0+IHtcbiAgICBtYXAucGFuVG8odmVudWUubG9jYXRpb24pO1xuICAgIG1hcC5zZXRab29tKDE3KTtcbiAgICB2ZW51ZS5tYXJrZXIuc2V0QW5pbWF0aW9uKGdvb2dsZS5tYXBzLkFuaW1hdGlvbi5CT1VOQ0UpO1xuICAgIC8vIEVhY2ggYm91bmNlIGlzIGFib3V0IDcwMG1zIGFzIG9mIGdvb2dsZSBtYXBzIHZlcnNpb24ganM/dj0zLjEzXG4gICAgY29uc3QgTUFSS0VSX0pVTVAgPSA3MDA7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIHZlbnVlLm1hcmtlci5zZXRBbmltYXRpb24obnVsbCk7XG4gICAgfSwgMyAqIE1BUktFUl9KVU1QKTtcbiAgICAvLyBUaGlzIGZ1bmN0aW9uYWxpdHkgZG9lcyBub3QgbWF0Y2ggbXkgb3duIFVJXG4gICAgLy8gYnV0IGl0IHdhcyBhc2tlZCBieSBteSByZXZpZXdlciB0byBkbyB0aGlzIHJlZ2FyZGxlc3NcbiAgICAvLyBpZiBpdCB3YXMgc2hvd24gb3Igbm90IGNhdXNlIG9mIHRoZSBydWJyaWMgcmVxdWlyZW1lbnRzXG4gICAgdGhpcy5tYXJrZXJDbGljayh2ZW51ZSk7XG4gIH07XG4gIC8qKlxuICAgKiBUb2dnbGUgdmVudWVzIGxpc3QsIHZlbnVlIGRldGFpbHMgZHJhd2VyIGFuZCBtYXBcbiAgICogdG8gdmlzYmxlL25vbi12aXNpYmxlLlxuICAgKiBWZW51ZSBkZXRhaWxzIHNob3VsZCBiZSB0aGUgb25seSB0aGluZyB0aGF0IGlzIHNob3duXG4gICAqL1xuICB0aGlzLnRvZ2dsZUxpc3REcmF3ZXJBbmRNYXAgPSAoKSA9PiB7XG4gICAgdGhpcy5pc0RyYXdlclZpc2libGUoIXRoaXMuaXNEcmF3ZXJWaXNpYmxlKCkpO1xuICAgIHRoaXMuaXNMaXN0VmlzaWJsZSghdGhpcy5pc0xpc3RWaXNpYmxlKCkpO1xuICAgIHRoaXMuaXNNYXBWaXNpYmxlKCF0aGlzLmlzTWFwVmlzaWJsZSgpKTtcbiAgfTtcbiAgLyoqXG4gICAqIFNldCBjdXJyZW50VmVudWUgdG8gdmVudWVcbiAgICogQHBhcmFtIHtPYmplY3R9IHZlbnVlIFZlbnVlIG9iamVjdFxuICAgKiBAc2VlIGh0dHA6Ly9rbm9ja291dGpzLmNvbS9kb2N1bWVudGF0aW9uL2NsaWNrLWJpbmRpbmcuaHRtbFxuICAgKi9cbiAgdGhpcy5zZXRDdXJyZW50VmVudWUgPSB2ZW51ZSA9PiB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHRoaXMuY3VycmVudFZlbnVlKHZlbnVlKTtcbiAgfTtcbiAgLyoqXG4gICAqIEluaXRpYWxpemUgdGhlIGFycmF5XG4gICAqIEB0eXBlIHtLbm9ja291dE9ic2VydmFibGVBcnJheTxUPn1cbiAgICovXG4gIHRoaXMudmVudWVzID0ga28ub2JzZXJ2YWJsZUFycmF5KFtdKTtcbiAgLyoqXG4gICAqIENvbnRhaW5zIGFsbCB2ZW51ZSBtYXJrZXJzXG4gICAqIEB0eXBlIHtBcnJheX0gTWFya2Vyc1xuICAgKi9cbiAgdGhpcy5tYXJrZXJzID0gW107XG4gIC8qKlxuICAgKiBIaWRlIG1hcmtlcnMgb24gYSBnaXZlbiBtYXJrZXJzIGFycmF5XG4gICAqIEBwYXJhbSB7QXJyYXl9IG1hcmtlcnMgR29vZ2xlIE1hcHMgTWFya2VycyBBcnJheVxuICAgKi9cbiAgdGhpcy5oaWRlTWFya2VycyA9IG1hcmtlcnMgPT4ge1xuICAgIGZvciAodmFyIG1hcmtlciBvZiBtYXJrZXJzKSB7XG4gICAgICBtYXJrZXIuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgfVxuICB9O1xuICAvKipcbiAgICogRXJyb3IgYmluZGluZyBmb3IgZGlzcGxheWluZyBhbiBlcnJvciBzY3JlZW5cbiAgICogVG8gZGlzcGxheSBhbiBlcnJvciBzaW1wbHkgc2V0IGFuIGVycm9yIG1lc3NhZ2VcbiAgICogQHR5cGUge0tub2Nrb3V0T2JzZXJ2YWJsZTxTdHJpbmc+fSBTdHJpbmcgdGhhdCBjb250YWlucyB0aGUgZXJyb3IgbWVzc2FnZVxuICAgKi9cbiAgdGhpcy5lcnJvciA9IGtvLm9ic2VydmFibGUobnVsbCk7XG4gIC8qKlxuICAgKiBCb29sZWFuIHZhbHVlLiBUcnVlIG9uIGVycm9yIGZyZWUsIGZhbHNlIG9uIG90aGVyd2lzZS5cbiAgICogRGVwZW5kcyBvbiB3aGV0aGVyIHRoaXMuZXJyb3IgaXMgc2V0LlxuICAgKiBAdHlwZSB7S25vY2tvdXRDb21wdXRlZDxCb29sZWFuPn0gU2VsZiBleHBsYWluZWQgYm9vbGVhblxuICAgKi9cbiAgdGhpcy5lcnJvckZyZWUgPSBrby5wdXJlQ29tcHV0ZWQoZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICFCb29sZWFuKHRoaXMuZXJyb3IoKSk7XG4gIH0sIHRoaXMpO1xuICAvKipcbiAgICogRmlsdGVyaW5nIGZ1bmN0aW9uXG4gICAqIEB0eXBlIHtLbm9ja291dENvbXB1dGVkPFQ+fVxuICAgKi9cbiAgdGhpcy52ZW51ZXNUb1Nob3cgPSBrby5wdXJlQ29tcHV0ZWQoZnVuY3Rpb24oKSB7XG4gICAgdmFyIGZpbHRlciA9IHRoaXMuZmlsdGVyKCk7XG4gICAgaWYgKGZpbHRlciA9PT0gJycpIHtcbiAgICAgIGZvciAodmFyIG1hcmtlciBvZiB0aGlzLm1hcmtlcnMpIHtcbiAgICAgICAgbWFya2VyLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy52ZW51ZXMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmlsdGVyIHRocm91Z2ggYXJyYXkgYW5kIHJldHVybiBvbmx5IG1hdGNoaW5nIHJlc3VsdHNcbiAgICAgKiBAc2VlIGh0dHA6Ly9rbm9ja291dGpzLmNvbS9leGFtcGxlcy9hbmltYXRlZFRyYW5zaXRpb25zLmh0bWxcbiAgICAgKi9cbiAgICB2YXIgZmlsdGVyZWRWZW51ZXMgPSBrby51dGlscy5hcnJheUZpbHRlcih0aGlzLnZlbnVlcygpLCBmdW5jdGlvbih2ZW51ZSkge1xuICAgICAgcmV0dXJuIHZlbnVlLmNhdGVnb3J5LnRhZyA9PT0gZmlsdGVyIHx8XG4gICAgICAgIHZlbnVlLmNhdGVnb3J5Lm5hbWUgPT09IGZpbHRlciB8fFxuICAgICAgICB2ZW51ZS5uYW1lID09PSBmaWx0ZXI7XG4gICAgfSk7XG4gICAgLy8gaGlkZSBhbGwgbWFya2Vyc1xuICAgIHRoaXMuaGlkZU1hcmtlcnModGhpcy5tYXJrZXJzKTtcbiAgICAvLyBhbmQgc2hvdyB0aG9zZSBmcm9tIHRoZSBzZWFyY2ggcmVzdWx0c1xuICAgIGZvciAodmFyIHZlbnVlIG9mIGZpbHRlcmVkVmVudWVzKSB7XG4gICAgICB2ZW51ZS5tYXJrZXIuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICB9XG4gICAgLy8gZmluYWxseSByZXR1cm4gdGhlIGZpbHRlcmVkIHZlbnVlIHJlc3VsdHNcbiAgICByZXR1cm4gZmlsdGVyZWRWZW51ZXM7XG4gIH0sIHRoaXMpO1xuICAvLyBQb3B1bGF0ZSBhcnJheXMgYW5kIGluaXRpYWxpemUgbGlzdGVuZXJzXG4gIC8vIGF0dGFjaCBtYXJrZXJzIHRvIHZlbnVlc1xuICAvLyB3aGVuIHJlc3BvbnNlIGlzIHJlYWR5XG4gIGRhdGFNb2RlbC5mb3Vyc3F1YXJlKCczOC40NjQ1MjUsMjMuNjA1MDcnKS50aGVuKGRhdGEgPT4ge1xuICAgIC8vIFBvcHVsYXRlIG9ic2VydmFibGUgYXJyYXlcbiAgICB0aGlzLnZlbnVlcyhkYXRhKTtcbiAgICAvLyBGb3IgZXZlcnkgdmVudWVcbiAgICBmb3IgKGxldCB2ZW51ZSBvZiB0aGlzLnZlbnVlcygpKSB7XG4gICAgICAvLyBDcmVhdGUgbmV3IG1hcmtlclxuICAgICAgbGV0IG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuICAgICAgICBwb3NpdGlvbjogdmVudWUubG9jYXRpb24sXG4gICAgICAgIHRpdGxlOiB2ZW51ZS5uYW1lLFxuICAgICAgICBhbmltYXRpb246IGdvb2dsZS5tYXBzLkFuaW1hdGlvbi5EUk9QLFxuICAgICAgICBpY29uOiB2ZW51ZS5pY29uXG4gICAgICB9KTtcbiAgICAgIC8vIGF0dGFjaCBtYXJrZXIgdG8gaXRzIHZlbnVlXG4gICAgICB2ZW51ZS5tYXJrZXIgPSBtYXJrZXI7XG4gICAgICAvLyBzYXZlIHRoZSBtYXJrZXIgdG8gbWFya2VycyBhcnJheVxuICAgICAgdGhpcy5tYXJrZXJzLnB1c2gobWFya2VyKTtcbiAgICAgIC8vIEFkZCBsaXN0ZW5lciB0byBvcGVuIGNvcnJlY3QgdmVudWUgZGV0YWlsc1xuICAgICAgLy8gd2hlbiB0aGUgbWFya2VyIGlzIGNsaWNrZWRcbiAgICAgIG1hcmtlci5hZGRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIHRoaXMubWFya2VyQ2xpY2sodmVudWUpO1xuICAgICAgfSk7XG4gICAgICAvLyBhbmQgZmluYWxseSBzZXQgdGhlIG1hcmtlclxuICAgICAgbWFya2VyLnNldE1hcChtYXApO1xuICAgIH1cbiAgfSwgZXJyb3IgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZDonLCBlcnJvcik7XG4gICAgdGhpcy5lcnJvcihlcnJvcik7XG4gIH0pO1xufTtcbiJdfQ==\n","/*!\n *\n *  Web Starter Kit\n *  Copyright 2015 Google Inc. All rights reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    https://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License\n *\n */\n/* eslint-env browser */\n(function() {\n  'use strict';\n\n  // Check to make sure service workers are supported in the current browser,\n  // and that the current page is accessed from a secure origin. Using a\n  // service worker from an insecure origin will trigger JS console errors. See\n  // http://www.chromium.org/Home/chromium-security/prefer-secure-origins-for-powerful-new-features\n  var isLocalhost = Boolean(window.location.hostname === 'localhost' ||\n      // [::1] is the IPv6 localhost address.\n      window.location.hostname === '[::1]' ||\n      // 127.0.0.1/8 is considered localhost for IPv4.\n      window.location.hostname.match(\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n      )\n    );\n\n  if ('serviceWorker' in navigator &&\n      (window.location.protocol === 'https:' || isLocalhost)) {\n    navigator.serviceWorker.register('service-worker.js')\n    .then(function(registration) {\n      // updatefound is fired if service-worker.js changes.\n      registration.onupdatefound = function() {\n        // updatefound is also fired the very first time the SW is installed,\n        // and there's no need to prompt for a reload at that point.\n        // So check here to see if the page is already controlled,\n        // i.e. whether there's an existing service worker.\n        if (navigator.serviceWorker.controller) {\n          // The updatefound event implies that registration.installing is set:\n          // https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html#service-worker-container-updatefound-event\n          var installingWorker = registration.installing;\n\n          installingWorker.onstatechange = function() {\n            switch (installingWorker.state) {\n              case 'installed':\n                // At this point, the old content will have been purged and the\n                // fresh content will have been added to the cache.\n                // It's the perfect time to display a \"New content is\n                // available; please refresh.\" message in the page's interface.\n                break;\n\n              case 'redundant':\n                throw new Error('The installing ' +\n                                'service worker became redundant.');\n\n              default:\n                // Ignore\n            }\n          };\n        }\n      };\n    }).catch(function(e) {\n      console.error('Error during service worker registration:', e);\n    });\n  }\n  // Google maps on error can't be handled with KO\n  // due to the way scripts are organized (async).\n  // So it needs to be handled here\n  window.googleMapsOnError = () => {\n    const errorMessage = 'Google Maps did not load correctly';\n    const htmlTemplate =\n      '<div id=\"error-panel\"' +\n        'class=\"error mdl-typography--text-center mdl-color--grey-300 mdl-color-text--grey-700\">' + // eslint-disable-line max-len\n        '<div class=\"error__body-center\">' +\n          '<h1>Oops, something went wrong</h1>' +\n          '<h2>' + errorMessage + '</h2>' +\n        '</div>' +\n      '</div>';\n    document.body.innerHTML = htmlTemplate;\n  };\n  // Called by google maps callback\n  window.initMap = () => {\n    // initialize map\n    window.map = new google.maps.Map(document.getElementById('map'), {\n      center: {lat: 38.464525, lng: 23.60507},\n      zoom: 12,\n      // Style by: Sam Herbert, on: https://snazzymaps.com/style/44/mapbox\n      styles: [\n        {\n          featureType: 'water',\n          stylers: [\n            {\n              saturation: 43\n            },\n            {\n              lightness: -11\n            },\n            {\n              hue: '#0088ff'\n            }\n          ]\n        },\n        {\n          featureType: 'road',\n          elementType: 'geometry.fill',\n          stylers: [\n            {\n              hue: '#ff0000'\n            },\n            {\n              saturation: -100\n            },\n            {\n              lightness: 99\n            }\n          ]\n        },\n        {\n          featureType: 'road',\n          elementType: 'geometry.stroke',\n          stylers: [\n            {\n              color: '#808080'\n            },\n            {\n              lightness: 54\n            }\n          ]\n        },\n        {\n          featureType: 'landscape.man_made',\n          elementType: 'geometry.fill',\n          stylers: [\n            {\n              color: '#ece2d9'\n            }\n          ]\n        },\n        {\n          featureType: 'poi.park',\n          elementType: 'geometry.fill',\n          stylers: [\n            {\n              color: '#ccdca1'\n            }\n          ]\n        },\n        {\n          featureType: 'road',\n          elementType: 'labels.text.fill',\n          stylers: [\n            {\n              color: '#767676'\n            }\n          ]\n        },\n        {\n          featureType: 'road',\n          elementType: 'labels.text.stroke',\n          stylers: [\n            {\n              color: '#ffffff'\n            }\n          ]\n        },\n        {\n          featureType: 'poi',\n          stylers: [\n            {\n              visibility: 'off'\n            }\n          ]\n        },\n        {\n          featureType: 'landscape.natural',\n          elementType: 'geometry.fill',\n          stylers: [\n            {\n              visibility: 'on'\n            },\n            {\n              color: '#b8cb93'\n            }\n          ]\n        },\n        {\n          featureType: 'poi.park',\n          elementType: 'labels',\n          stylers: [\n            {\n              visibility: 'off'\n            }\n          ]\n        },\n        {\n          featureType: 'poi.sports_complex',\n          stylers: [\n            {\n              visibility: 'off'\n            }\n          ]\n        },\n        {\n          featureType: 'poi.medical',\n          stylers: [\n            {\n              visibility: 'off'\n            }\n          ]\n        },\n        {\n          featureType: 'poi.business',\n          stylers: [\n            {\n              visibility: 'off'\n            }\n          ]\n        },\n        {\n          featureType: 'transit',\n          elementType: 'labels.icon',\n          stylers: [{visibility: 'off'}]\n        }\n      ],\n      // Allows the user to adjust the map to road, satellite, terrain etc\n      mapTypeControl: false\n    });\n    // initialize bindings\n    ko.applyBindings(new ViewModel());\n  };\n})();\n","var dataModel = {};\n/**\n * Make a Foursquare API request on a given location.\n * @param {String} location A string in the form of '38.464525,23.60507'.\n * @return {Promise} Return a promise where on resolve it will return an\n * array with all the venues and on reject will return a string with the error\n */\ndataModel.foursquare = function(location) {\n  return new Promise(function(resolve, reject) {\n    const FOURSQUARE_CLIENT_ID =\n      'DZLWV3OVTRDIJ4A3HYBWIHZLHNPPWSPULWU0MOIUPV4UGD0B';\n    const FOURSQUARE_CLIENT_SECRET =\n      'MFMOIF4BD4H0K3ULA41LF2WD5SK0KRJAQLTUZT4VV3XVGC0O';\n    const LL = location;\n    const V = '20170425';\n    const VENUE_PHOTOS = '1';\n    const BASE_URL = 'https://api.foursquare.com/v2/venues/explore?';\n    const LIMIT = 50;\n\n    var url = BASE_URL +\n      'client_id=' + FOURSQUARE_CLIENT_ID +\n      '&client_secret=' + FOURSQUARE_CLIENT_SECRET +\n      '&ll=' + LL +\n      '&v=' + V +\n      '&venuePhotos=' + VENUE_PHOTOS +\n      '&limit=' + LIMIT;\n\n    var request = new XMLHttpRequest();\n    request.open('GET', url);\n    request.responseType = 'json';\n\n    request.onload = function() {\n      if (request.status === 200) {\n        // If successful, resolve the promise by passing back the venues array\n        var venues = [];\n        for (let item of request.response.response.groups[0].items) {\n          let venue = {\n            name: item.venue.name,\n            foursquare: 'https://foursquare.com/v/' +\n              item.venue.id +\n              '?ref=' +\n              FOURSQUARE_CLIENT_ID,\n            location: {\n              lat: item.venue.location.lat,\n              lng: item.venue.location.lng\n            },\n            distance: item.venue.location.distance,\n            address: item.venue.location.address,\n            rating: {\n              number: Math.round(item.venue.rating) / 2,\n              stars: [\n                'images/star_border_yellow_18px.svg',\n                'images/star_border_yellow_18px.svg',\n                'images/star_border_yellow_18px.svg',\n                'images/star_border_yellow_18px.svg',\n                'images/star_border_yellow_18px.svg'\n              ]\n            },\n            icon: item.venue.categories[0].icon.prefix +\n              'bg_32' +\n              item.venue.categories[0].icon.suffix,\n            category: {\n              name: item.venue.categories[0].name,\n              tag: item.venue.categories[0].shortName\n            },\n            photo: item.venue.featuredPhotos.items[0].prefix +\n              'original' +\n              item.venue.featuredPhotos.items[0].suffix\n          };\n          // fix rating.stars\n          var i;\n          for (i = 0; i < Math.floor(venue.rating.number); i++) {\n            venue.rating.stars[i] = 'images/star_yellow_18px.svg';\n          }\n          if (venue.rating.number % 1 !== 0) {\n            venue.rating.stars[i] = 'images/star_half_yellow_18px.svg';\n          }\n          // filter through non-standard information\n          venue.phone = item.venue.contact.phone ?\n            item.venue.contact.phone : null;\n          venue.facebook = item.venue.contact.facebook ? 'https://www.facebook.com/' + item.venue.contact.facebook : null;\n          venue.price = item.venue.price ? item.venue.price.message : null;\n          // Even if Foursquare has hours on a venue,\n          // when a venue is closed sometimes the status\n          // message is omitted and only the flag\n          // isOpen: false exists. That's the logic\n          // the following statement represents\n          venue.status = item.venue.hours ?\n            item.venue.hours.status || 'Closed' : null;\n          venue.url = item.venue.url ? item.venue.url : null;\n          venues.push(venue);\n        }\n        resolve(venues);\n      } else {\n        // If it fails, reject the promise with an error message\n        let status = request.status;\n        let statusText = request.statusText;\n        reject(Error('There was a problem:', '(', status, ')', statusText));\n      }\n    };\n    // Also deal with the case when the entire request fails to begin with\n    // This is probably a network error, so reject the promise with an appropriate message\n    request.onerror = function() {\n      reject(Error('Network Error'));\n    };\n    // Execute request\n    request.send();\n  });\n};\n","var ViewModel = function() { // eslint-disable-line no-unused-vars\n  'use strict';\n  /**\n   * Holds the value of filterbox\n   * @type {KnockoutObservable<T>}\n   */\n  this.filter = ko.observable('');\n  /**\n   * Status of the drawer UI component\n   * @type {KnockoutObservable<T>}\n   */\n  this.isDrawerVisible = ko.observable(false);\n  /**\n   * Status of the map UI component\n   * @type {KnockoutObservable<T>}\n   */\n  this.isMapVisible = ko.observable(true);\n  /**\n   * Status of the filterbox UI component\n   * @type {KnockoutObservable<T>}\n   */\n  this.isFilterboxVisible = ko.observable(true);\n  /**\n   * Status of the list UI component\n   * @type {KnockoutObservable<T>}\n   */\n  this.isListVisible = ko.observable(true);\n  /**\n   * Current venue\n   * @type {KnockoutObservable<T>}\n   */\n  this.currentVenue = ko.observable();\n  /**\n   * Is triggered when a venue in the list is clicked\n   * @param {Object} venue The clicked venue\n   */\n  this.markerClick = venue => {\n    this.toggleListDrawerAndMap();\n    this.setCurrentVenue(venue);\n    // This functionality does not match my own UI\n    // but it was asked by my reviewer to do this regardless\n    // if it was shown or not cause of the rubric requirements\n    venue.marker.setAnimation(google.maps.Animation.BOUNCE);\n    // Each bounce is about 700ms as of google maps version js?v=3.13\n    const MARKER_JUMP = 700;\n    setTimeout(function() {\n      venue.marker.setAnimation(null);\n    }, 3 * MARKER_JUMP);\n  };\n  this.venueClick = venue => {\n    map.panTo(venue.location);\n    map.setZoom(17);\n    venue.marker.setAnimation(google.maps.Animation.BOUNCE);\n    // Each bounce is about 700ms as of google maps version js?v=3.13\n    const MARKER_JUMP = 700;\n    setTimeout(function() {\n      venue.marker.setAnimation(null);\n    }, 3 * MARKER_JUMP);\n    // This functionality does not match my own UI\n    // but it was asked by my reviewer to do this regardless\n    // if it was shown or not cause of the rubric requirements\n    this.markerClick(venue);\n  };\n  /**\n   * Toggle venues list, venue details drawer and map\n   * to visble/non-visible.\n   * Venue details should be the only thing that is shown\n   */\n  this.toggleListDrawerAndMap = () => {\n    this.isDrawerVisible(!this.isDrawerVisible());\n    this.isListVisible(!this.isListVisible());\n    this.isMapVisible(!this.isMapVisible());\n  };\n  /**\n   * Set currentVenue to venue\n   * @param {Object} venue Venue object\n   * @see http://knockoutjs.com/documentation/click-binding.html\n   */\n  this.setCurrentVenue = venue => {\n    'use strict';\n    this.currentVenue(venue);\n  };\n  /**\n   * Initialize the array\n   * @type {KnockoutObservableArray<T>}\n   */\n  this.venues = ko.observableArray([]);\n  /**\n   * Contains all venue markers\n   * @type {Array} Markers\n   */\n  this.markers = [];\n  /**\n   * Hide markers on a given markers array\n   * @param {Array} markers Google Maps Markers Array\n   */\n  this.hideMarkers = markers => {\n    for (var marker of markers) {\n      marker.setVisible(false);\n    }\n  };\n  /**\n   * Error binding for displaying an error screen\n   * To display an error simply set an error message\n   * @type {KnockoutObservable<String>} String that contains the error message\n   */\n  this.error = ko.observable(null);\n  /**\n   * Boolean value. True on error free, false on otherwise.\n   * Depends on whether this.error is set.\n   * @type {KnockoutComputed<Boolean>} Self explained boolean\n   */\n  this.errorFree = ko.pureComputed(function() {\n    return !Boolean(this.error());\n  }, this);\n  /**\n   * Filtering function\n   * @type {KnockoutComputed<T>}\n   */\n  this.venuesToShow = ko.pureComputed(function() {\n    var filter = this.filter();\n    if (filter === '') {\n      for (var marker of this.markers) {\n        marker.setVisible(true);\n      }\n      return this.venues();\n    }\n    /**\n     * Filter through array and return only matching results\n     * @see http://knockoutjs.com/examples/animatedTransitions.html\n     */\n    var filteredVenues = ko.utils.arrayFilter(this.venues(), function(venue) {\n      return venue.category.tag === filter ||\n        venue.category.name === filter ||\n        venue.name === filter;\n    });\n    // hide all markers\n    this.hideMarkers(this.markers);\n    // and show those from the search results\n    for (var venue of filteredVenues) {\n      venue.marker.setVisible(true);\n    }\n    // finally return the filtered venue results\n    return filteredVenues;\n  }, this);\n  // Populate arrays and initialize listeners\n  // attach markers to venues\n  // when response is ready\n  dataModel.foursquare('38.464525,23.60507').then(data => {\n    // Populate observable array\n    this.venues(data);\n    // For every venue\n    for (let venue of this.venues()) {\n      // Create new marker\n      let marker = new google.maps.Marker({\n        position: venue.location,\n        title: venue.name,\n        animation: google.maps.Animation.DROP,\n        icon: venue.icon\n      });\n      // attach marker to its venue\n      venue.marker = marker;\n      // save the marker to markers array\n      this.markers.push(marker);\n      // Add listener to open correct venue details\n      // when the marker is clicked\n      marker.addListener('click', () => {\n        this.markerClick(venue);\n      });\n      // and finally set the marker\n      marker.setMap(map);\n    }\n  }, error => {\n    console.error('Failed:', error);\n    this.error(error);\n  });\n};\n"]}